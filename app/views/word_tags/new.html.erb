<div class="container">
  <div class="page-header">
    <h1>単語タグ新規登録</h1>
    <div class="header-actions">
      <%= link_to "一覧へ戻る", word_tags_path, class: "btn btn-secondary" %>
      <%= link_to "メニューへ戻る", root_path, class: "btn btn-secondary" %>
    </div>
  </div>

  <%= form_with model: @word_tag, local: true do |f| %>
    <% if @word_tag.errors.any? %>
      <div class="error-box">
        <h3><%= pluralize(@word_tag.errors.count, "エラー") %> 発生:</h3>
        <ul>
          <% @word_tag.errors.full_messages.each do |message| %>
            <li><%= message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div class="form-group">
      <%= f.label :name, "タグ名" %>
      <%= f.text_field :name, class: "form-control", placeholder: "例: 動詞" %>
    </div>

    <div class="form-group">
      <%= f.label :description, "説明" %>
      <%= f.text_area :description, class: "form-control", placeholder: "このタグの用途を入力" %>
    </div>

    <div class="form-group">
      <%= f.label :color, "色" %>
      <div style="display: flex; align-items: center; gap: 10px;">
        <%= f.color_field :color, class: "form-control", value: (@word_tag.color.presence || "#4CAF50") %>
        <span class="color-preview" style="display: inline-block; width: 30px; height: 30px; border: 1px solid #ccc; border-radius: 4px; background-color: <%= @word_tag.color.presence || "#4CAF50" %>;"></span>
      </div>
    </div> 

    <div class="form-actions">
      <%= f.submit "作成", class: "btn btn-primary" %>
      <%= link_to "キャンセル", word_tags_path, class: "btn btn-secondary" %>
    </div>
  <% end %>
</div>

<script>
  document.addEventListener('turbo:load', function() {
    const colorInput = document.querySelector('input[type="color"]');
    const colorPreview = document.querySelector('.color-preview');

    if (colorInput && colorPreview) {
      colorInput.addEventListener('input', function() {
        colorPreview.style.backgroundColor = this.value;
      });
    }
  });
</script>